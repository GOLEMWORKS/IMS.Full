@page "/"

<PageTitle> Загрузка фалов демо</PageTitle>

<InputFile OnChange="@OnLoadFiles" multiple />

@if(errors.Count > 0)
{
    <h2>Ошибка!</h2>
    <ul class="text-danger">
        @foreach(var error in errors)
        {
            <li>@error</li>
        }
    </ul>
}

@code {
    private long maxFileSize = 1024 * 1024 * 3; //Мегабайты 3
    private int maxAllowedFiles = 3;
    private List<string> errors = new();

    private async Task OnLoadFiles(InputFileChangeEventArgs e)
    {
        errors.Clear();

        if(e.FileCount > maxAllowedFiles)
        {
            errors.Add($"Вы не можете добавить более чем {maxAllowedFiles} файла(ов)! Вы добавили: {e.FileCount}");
            return;
        }

        foreach(var file in e.GetMultipleFiles(maxAllowedFiles))
        {
            
        }
    }
}
